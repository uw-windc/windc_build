GAMS 47.2.0  54a8429d Jul 1, 2024           WEX-WEI x86 64bit/MS Windows - 09/12/24 09:04:38 Page 1
State disaggregation of national accounts
C o m p i l a t i o n


   2   
   3  set     yr      /1997*2023/;
   4   
   5  set     r       Regions /
   6          USA     Nation
   7          AL      "Alabama",
   8          AK      "Alaska",
   9          AR      "Arizona",
  10          AZ      "Arkansas",
  11          CA      "California",
  12          CO      "Colorado",
  13          CT      "Connecticut",
  14          DC      "District of Columbia",
  15          DE      "Delaware",
  16          FL      "Florida",
  17          GA      "Georgia",
  18          HI      "Hawaii",
  19          IA      "Iowa",
  20          ID      "Idaho",
  21          IL      "Illinois",
  22          IN      "Indiana",
  23          KS      "Kansas",
  24          KY      "Kentucky",
  25          LA      "Louisiana",
  26          MA      "Massachusetts",
  27          MD      "Maryland",
  28          ME      "Maine",
  29          MI      "Michigan",
  30          MN      "Minnesota",
  31          MO      "Missouri",
  32          MS      "Mississippi",
  33          MT      "Montana",
  34          NC      "North Carolina",
  35          ND      "North Dakota",
  36          NE      "Nebraska",
  37          NH      "New Hampshire",
  38          NJ      "New Jersey",
  39          NM      "New Mexico",
  40          NV      "Nevada",
  41          NY      "New York",
  42          OH      "Ohio",
  43          OK      "Oklahoma",
  44          OR      "Oregon",
  45          PA      "Pennsylvania",
  46          RI      "Rhode Island",
  47          SC      "South Carolina",
  48          SD      "South Dakota",
  49          TN      "Tennessee",
  50          TX      "Texas",
  51          UT      "Utah",
  52          VA      "Virginia",
  53          VT      "Vermont",
  54          WA      "Washington",
  55          WV      "West Virginia",
  56          WI      "Wisconsin",
  57          WY      "Wyoming"/
  58   
  59  * ------------------------------------------------------------------------------
  60  * Read in the national dataset:
  61  * ------------------------------------------------------------------------------
  62   
INCLUDE    d:\GitHub\windc_build\bea_IO\beadata.gms
GAMS 47.2.0  54a8429d Jul 1, 2024           WEX-WEI x86 64bit/MS Windows - 09/12/24 09:04:38 Page 2
State disaggregation of national accounts
Read the BEA Dataset


  66   
  68   
  69  set     s(*)    Sectors
  70          mrg     Margins /trd,trn/,
  71          xd      Exogenous demand /
  72  *.              F010    "Personal consumption expenditures",
  73                  F02E    "Nonresidential private fixed investment in equipment",
  74                  F02N    "Nonresidential private fixed investment in intellectual property products",
  75                  F02R    "Residential private fixed investment",
  76                  F02S    "Nonresidential private fixed investment in structures",
  77                  F030    "Change in private inventories",
  78                  F06C    "Federal Government defense: Consumption expenditures",
  79                  F06E    "Federal national defense: Gross investment in equipment",
  80                  F06N    "Federal national defense: Gross investment in intellectual property products",
  81                  F06S    "Federal national defense: Gross investment in structures",
  82                  F07C    "Federal Government nondefense: Consumption expenditures",
  83                  F07E    "Federal nondefense: Gross investment in equipment",
  84                  F07N    "Federal nondefense: Gross investment in intellectual property products",
  85                  F07S    "Federal nondefense: Gross investment in structures",
  86                  F10C    "State and local government consumption expenditures",
  87                  F10E    "State and local: Gross investment in equipment",
  88                  F10N    "State and local: Gross investment in intellectual property products",
  89                  F10S    "State and local: Gross investment in structures" /;
  90   
GDXIN   d:\GitHub\windc_build\bea_IO\data\gebalanced.gdx
--- LOAD  s = 3:s
  93   
  96   
  99   
 100  alias (s,ss,g,gg);
 101   
 102  parameter
 103          ld0(yr,r,s)     Labor demand
 104          kd0(yr,r,s)     Capital demand
 105          lvs(yr,r,s)     Labor value share
 106          kl0(yr,r,s)     Aggregate factor earnings (K+L)
 107          x0(yr,r,g)      Regional exports
 108          d0(yr,r,g)      Domestic demand,
 109          rx0(yr,r,g)     Re-exports
 110          ns0(yr,r,g)     Supply to the national market
 111          n0(yr,g)        National market aggregate supply
 112          a0(yr,r,g)      Absorption
 113          m0(yr,r,g)      Imports
 114          ty0(yr,r,s)     Output tax rate
 115          tm0(yr,r,g)     Import tariff
 116          ta0(yr,r,g)     Product tax
 117          nd0(yr,r,g)     National market demand,
 118          am(yr,r,mrg,g)  Trade and transport margin,
 119          ms0(yr,r,g,mrg) Margin supply,
 120          ys0(yr,r,s,g)   Make matrix
 121          id0(yr,r,g,s)   Intermediate demand,
 122          id0(yr,r,g,s)   Intermediate demand,
 123          cd0(yr,r,g)     Final demand
 124          fd0(yr,r,g,xd)  Final demand
 125          md0(yr,r,mrg,g) Margin demand;
 126   
--- LOAD  ys0 = 5:ys0
--- LOAD  ld0 = 6:ld0
--- LOAD  kd0 = 7:kd0
--- LOAD  id0 = 8:id0
--- LOAD  rx0 = 9:rx0
--- LOAD  x0 = 10:x0
--- LOAD  ms0 = 11:ms0
--- LOAD  ns0 = 12:ns0
--- LOAD  nd0 = 13:nd0
--- LOAD  cd0 = 15:cd0
--- LOAD  a0 = 16:a0
--- LOAD  m0 = 17:m0
--- LOAD  ty0 = 18:ty0
--- LOAD  tm0 = 19:tm0
--- LOAD  ta0 = 20:ta0
--- LOAD  md0 = 21:md0
--- LOAD  fd0 = 14:fd0
 129  parameter
 130          ty(yr,r,s)      Output tax rate
 131          tm(yr,r,g)      Import tariff
 132          ta(yr,r,g)      Product tax;
 133   
 134  ty(yr,r,s) = ty0(yr,r,s);
 135  tm(yr,r,g) = tm0(yr,r,g);
 136  ta(yr,r,g) = ta0(yr,r,g);
 137   
 138  *       Choose the base year
 139   
 140  singleton set yb(yr) /2017/;
 141   
 142  parameter       epsilonx(g)     Export demand elasticity;
 143  epsilonx(g) = 2;
 144   
 145  parameter       vx0(yr,g)       Aggregate exports,
 146                  y0(yr,r,g)      Aggregate output,
 147                  n0(yr,g)        Aggregate national market;
 148   
 149  y0(yr,r,g) = sum(s,ys0(yr,r,s,g));
 150  vx0(yr,g) = sum(r,x0(yr,r,g));
 151  n0(yr,g) = sum(r,ns0(yr,r,g));
 152   
 153  set     y_(yr,r,s)      Set of active Y sectors
 154          pa_(yr,r,g)     Set of active PA markets;
 155   
 156  parameter       abstol /6/;
 157  y_(yr,r,s) = round(sum(g,ys0(yr,r,s,g)),abstol);
 158  pa_(yr,r,g) = a0(yr,r,g) + max(0,-sum(xd,fd0(yr,r,g,xd)))
 159   
 160  parameter       profit  Check on profit;
 161  profit(yr,r,s,"PY") = sum(g,ys0(yr,r,s,g));
 162  profit(yr,r,s,"PA") = sum(g,id0(yr,r,g,s));
 163  profit(yr,r,s,"VABAS") = ld0(yr,r,s) + kd0(yr,r,s) + sum(g,ys0(yr,r,s,g))*ty(yr,r,s);
 164  profit(yr,r,s,"chk") = profit(yr,r,s,"PY") - profit(yr,r,s,"PA") - profit(yr,r,s,"VABAS");
 165  option profit:3:1:1;
 166  *.display profit;
 167   
 168   
 169  parameter       market  Check on market clearance;
 170  market(yr,r,g,"Y") = sum(s,ys0(yr,r,s,g));
 171  market(yr,r,g,"ES") = x0(yr,r,g) - rx0(yr,r,g);
 172  market(yr,r,g,"N") = ns0(yr,r,g);
 173  market(yr,r,g,"MS") = sum(mrg,ms0(yr,r,g,mrg));
 174  market(yr,r,g,"chk") = market(yr,r,g,"Y") - market(yr,r,g,"ES") -
 175                      market(yr,r,g,"N") - market(yr,r,g,"MS");
 176  option market:3:1:1;
 177  *.display market;
 178   
 179  alias (u,*);
 180  profit(yr,r,s,u)$(not round(profit(yr,r,s,"chk"),6)) = 0;
 181  display profit;
 182   
 183  market(yr,r,g,u)$(not round(market(yr,r,g,"chk"),6)) = 0;
 184  display market;
 185   
 186   
 187  parameter       yd0(yr,r,g)     Local demand,
 188                  vb(yr,r)        Current account balance,
 189                  vbchk           Cross check on current account;
 190   
 191  yd0(yr,r,g) = 0;
 192   
 193  vb(yr,r) = sum(g,cd0(yr,r,g)) + sum((g,xd),fd0(yr,r,g,xd)) - sum(s,ld0(yr,r,s)+kd0(yr,r,s))
 194                  - sum(g$a0(yr,r,g), (m0(yr,r,g)-rx0(yr,r,g))*tm(yr,r,g) + a0(yr,r,g)*ta(yr,r,g))
 195                  - sum(y_(yr,r,s),sum(g,ys0(yr,r,s,g))*ty(yr,r,s));
 196   
 197  vbchk(yr) = sum(r,vb(yr,r));
 198   
 199  display vb, vbchk;
 200   
 201  *       Convert to a symmetric dataset:
 202   
 203  parameter       theta(yr,r,s,g)         Sector s share of good g supply,
 204                  ys0_(yr,r,g)            Output of good g,
 205                  ty_(yr,r,g)             Output tax,
 206                  ty0_(yr,r,g)            Output tax (benchmark),
 207                  id0_(yr,r,gg,g)         Intermediate demand,
 208                  ld0_(yr,r,g)            Labor demand,
 209                  kd0_(yr,r,g)            Capital demand;
 210   
 211  *       Sector s share of commodity g supply in region r:
 212   
 213  ys0_(yr,r,g) = sum(s,ys0(yr,r,s,g));
 214  theta(yr,r,s,g)$ys0(yr,r,s,g) = ys0(yr,r,s,g)/sum(gg,ys0(yr,r,s,gg));
 215  y_(yr,r,s) = ys0_(yr,r,s);
 216   
 217  option ys0_:3:0:1, y_:0:0:1;
 218  display ys0_, y_;
 219   
 220  ty_(yr,r,g)$ys0_(yr,r,g) = sum(s,theta(yr,r,s,g)*ty(yr,r,s)*sum(gg,ys0(yr,r,s,gg)))/
 221                                  ys0_(yr,r,g);
 222  ty0_(yr,r,g) = ty_(yr,r,g);
 223  id0_(yr,r,gg,g) = sum(s,theta(yr,r,s,g)*id0(yr,r,gg,s));
 224  ld0_(yr,r,g)    = sum(s,theta(yr,r,s,g)*ld0(yr,r,s));
 225  kd0_(yr,r,g)    = sum(s,theta(yr,r,s,g)*kd0(yr,r,s));
 226   
 227  * ------------------------------------------------------------------------------
 228  * Read in shares generated using state level gross product, pce, faf,
 229  * and government expenditures:
 230  * ------------------------------------------------------------------------------
 231   
 232  set     sagdptbl /
 233          t1      State annual gross domestic product (GDP) summary
 234          t2      Gross domestic product (GDP) by state
 235          t3      Taxes on production and imports less subsidies
 236          t4      Compensation of employees
 237          t5      Subsidies
 238          t6      Taxes on production and imports
 239          t7      Gross operating surplus
 240          t8      Chain-type quantity indexes for real GDP by state (2017=100.0)
 241          t9      Real GDP by state
 242          t11     Contributions to percent change in real GDP /
 243   
 244  parameter       sagdp(r,s,yr,sagdptbl)  State Annual GDP dataset;
GDXIN   d:\GitHub\windc_build\statedata\sagdp.gdx
--- LOAD  sagdp = 1:sagdp
**** Unique domain errors for symbol sagdp
 Dim  Elements

hrf_eec	ham_eec
hle_eec	ham_eec
wtt_wtt	wtt
wrh_wrh	wrh
wst_wst	wst
ent_sle

 246  $loaddc sagdp
****              $649
**** LINE     85 INPUT       d:\GitHub\windc_build\statedata\statedisagg.gms
**** 649  Domain violation when loading from GDX file
****      - See listing above for details
 247   
EXIT d:\GitHub\windc_build\statedata\statedisagg.gms

**** 1 ERROR(S)   0 WARNING(S)
GAMS 47.2.0  54a8429d Jul 1, 2024           WEX-WEI x86 64bit/MS Windows - 09/12/24 09:04:38 Page 3
State disaggregation of national accounts
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  d:\GitHub\windc_build\statedata\statedisagg.gms
     2       64 INCLUDE        1      64  .d:\GitHub\windc_build\bea_IO\beadata.gms
     3       91 GDXIN          2      27  .d:\GitHub\windc_build\bea_IO\data\gebalanced.gdx
     4      245 GDXIN          1      84  d:\GitHub\windc_build\statedata\sagdp.gdx
     5      248 EXIT           1      87  d:\GitHub\windc_build\statedata\statedisagg.gms


COMPILATION TIME     =        1.094 SECONDS    205 MB  47.2.0 54a8429d WEX-WEI


USER: Small MUD - 5 User License                     G240611|0002AO-GEN
      University of Wisconsin-Madison, Agricultural & Applied EconDC289
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      d:\GitHub\windc_build\statedata\statedisagg.gms
Output     d:\GitHub\windc_build\statedata\statedisagg.lst

**** USER ERROR(S) ENCOUNTERED
